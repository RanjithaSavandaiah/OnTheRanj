<mat-toolbar color="primary">
  <span>Project Management</span>
  <span style="flex: 1"></span>
  <span style="margin-right: 16px;" *ngIf="user$ | async as user">
    Welcome, {{ user.fullName }}
  </span>
  <button mat-icon-button (click)="onLogout()" matTooltip="Logout">
    <mat-icon>logout</mat-icon>
  </button>
</mat-toolbar>
<div style="padding: 24px;">
  <mat-card style="border-radius: 16px; box-shadow: 0 2px 12px #0001;">
    <mat-card-header>
      <mat-card-title>Project Codes</mat-card-title>
      <mat-card-subtitle>Manage project codes and details</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content style="padding-top: 16px;">
      <div style="display: flex; align-items: center; margin-bottom: 16px;">
        <button mat-flat-button color="primary"
          style="font-weight: 600; border-radius: 20px; box-shadow: 0 2px 8px #3f51b522;" (click)="onAddProject()">
          <mat-icon style="margin-right: 6px;">add</mat-icon>
          Add New Project
        </button>
      </div>
      <table mat-table [dataSource]="(projects$ | async) || []" style="width: 100%;">
        <ng-container matColumnDef="code">
          <th mat-header-cell *matHeaderCellDef>Code</th>
          <td mat-cell *matCellDef="let item">{{ item.code }}</td>
        </ng-container>
        <ng-container matColumnDef="projectName">
          <th mat-header-cell *matHeaderCellDef>Project Name</th>
          <td mat-cell *matCellDef="let item">{{ item.projectName }}</td>
        </ng-container>
        <ng-container matColumnDef="clientName">
          <th mat-header-cell *matHeaderCellDef>Client</th>
          <td mat-cell *matCellDef="let item">{{ item.clientName }}</td>
        </ng-container>
        <ng-container matColumnDef="isBillable">
          <th mat-header-cell *matHeaderCellDef>Billable</th>
          <td mat-cell *matCellDef="let item">
            <mat-chip [color]="item.isBillable ? 'primary' : 'default'">
              {{ item.isBillable ? 'Yes' : 'No' }}
            </mat-chip>
          </td>
        </ng-container>
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let item">
            <mat-chip [color]="item.status === 'Active' ? 'accent' : 'default'">
              {{ item.status }}
            </mat-chip>
          </td>
        </ng-container>
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let item">
            <div style="display: flex; gap: 8px; justify-content: center;">
              <button mat-icon-button color="primary" matTooltip="Edit Project" (click)="onEditProject(item)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" matTooltip="Delete Project" (click)="onDeleteProject(item)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>